# ะะปะฐััะพัะผะฐ ัะตะบะพะผะตะฝะดะฐัะธะน ะบัััะพะฒ

ะฃัะตะฑะฝัะน ะฟัะพะตะบั ะดะปั ัััะดะตะฝัะพะฒ Java: ะผะธะบัะพัะตัะฒะธัะฝะฐั ะฟะปะฐััะพัะผะฐ ัะตะบะพะผะตะฝะดะฐัะธะน ะบัััะพะฒ ั ะธัะฟะพะปัะทะพะฒะฐะฝะธะตะผ Spring Boot, Ktor ะธ Kafka.

## ๐ ะกะพะดะตัะถะฐะฝะธะต

- [ะััะธัะตะบัััะฐ](#ะฐััะธัะตะบัััะฐ)
- [ะขะตัะฝะพะปะพะณะธะธ](#ัะตัะฝะพะปะพะณะธะธ)
- [ะกัััะบัััะฐ ะฟัะพะตะบัะฐ](#ััััะบัััะฐ-ะฟัะพะตะบัะฐ)
- [ะขัะตะฑะพะฒะฐะฝะธั](#ััะตะฑะพะฒะฐะฝะธั)
- [ะะฐะฟััะบ ะฟัะพะตะบัะฐ](#ะทะฐะฟััะบ-ะฟัะพะตะบัะฐ)
- [API ะดะพะบัะผะตะฝัะฐัะธั](#api-ะดะพะบัะผะตะฝัะฐัะธั)
- [ะะทะฐะธะผะพะดะตะนััะฒะธะต ัะตัะฒะธัะพะฒ](#ะฒะทะฐะธะผะพะดะตะนััะฒะธะต-ัะตัะฒะธัะพะฒ)
- [ะขะตััะธัะพะฒะฐะฝะธะต](#ัะตััะธัะพะฒะฐะฝะธะต)

## ๐ ะััะธัะตะบัััะฐ

ะัะพะตะบั ัะพััะพะธั ะธะท ัะตััััั ะผะธะบัะพัะตัะฒะธัะพะฒ:

```
โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ     โโโโโโโโโโโโโโโโโโโ
โ   UserService   โ     โ  CourseService  โ     โ  RatingService  โ
โ  (Spring Boot)  โ     โ  (Spring Boot)  โ     โ  (Spring Boot)  โ
โ     :8081       โ     โ     :8082       โ     โ     :8083       โ
โโโโโโโโโโฌโโโโโโโโโ     โโโโโโโโโโฌโโโโโโโโโ     โโโโโโโโโโฌโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โ Kafka
         โ                       โ                       โผ
         โ                       โ              โโโโโโโโโโโโโโโโโโโ
         โ                       โ              โ     Kafka       โ
         โ                       โ              โ   Topic: ratingsโ
         โ                       โ              โโโโโโโโโโฌโโโโโโโโโ
         โ                       โ                       โ
         โ                       โ                       โผ
         โ                       โ              โโโโโโโโโโโโโโโโโโโ
         โโโโโโโโโโโโโโโโโโโโโโโโโดโโโโโโโโโโโโโโบโRecommendation   โ
                        HTTP                    โ    Service      โ
                                               โ   (Ktor/Kotlin) โ
                                               โ     :8084       โ
                                               โโโโโโโโโโโโโโโโโโโ
                                                        โ
                                                        โผ
                                               โโโโโโโโโโโโโโโโโโโ
                                               โ   PostgreSQL    โ
                                               โ    Databases    โ
                                               โโโโโโโโโโโโโโโโโโโ
```

### ะะธะบัะพัะตัะฒะธัั

1. **UserService** (Spring Boot, Java) - ะฟะพัั 8081
   - ะะตะณะธัััะฐัะธั ะธ ะฐะฒัะพัะธะทะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
   - JWT ะฐััะตะฝัะธัะธะบะฐัะธั
   - ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะพัะธะปัะผะธ

2. **CourseService** (Spring Boot, Java) - ะฟะพัั 8082
   - CRUD ะพะฟะตัะฐัะธะธ ะดะปั ะบัััะพะฒ
   - ะะพะธัะบ ะธ ัะธะปัััะฐัะธั ะบัััะพะฒ
   - ะะฐัะตะณะพัะธะธ ะบัััะพะฒ

3. **RatingService** (Spring Boot, Java) - ะฟะพัั 8083
   - ะัะธัะผ ะพัะตะฝะพะบ ะพั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
   - ะัะฑะปะธะบะฐัะธั ัะพะฑััะธะน ะฒ Kafka
   - ะะฐัััั ััะตะดะฝะธั ะพัะตะฝะพะบ

4. **RecommendationService** (Ktor, Kotlin) - ะฟะพัั 8084
   - ะะพััะตะฑะปะตะฝะธะต ัะพะฑััะธะน ะธะท Kafka
   - ะะปะณะพัะธัะผ ัะตะบะพะผะตะฝะดะฐัะธะน
   - ะะตััะพะฝะฐะปัะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ

## ๐ ะขะตัะฝะพะปะพะณะธะธ

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั |
|-----------|------------|
| Java ัะตัะฒะธัั | Spring Boot 3.x, Java 17+ |
| Kotlin ัะตัะฒะธั | Ktor 2.x, Kotlin 1.9+ |
| ะะฐะทะฐ ะดะฐะฝะฝัั | PostgreSQL 15 |
| ะัะตัะตะดั ัะพะพะฑัะตะฝะธะน | Apache Kafka |
| ORM (Java) | Spring Data JPA / Hibernate |
| ORM (Kotlin) | Exposed |
| ะััะตะฝัะธัะธะบะฐัะธั | JWT (JSON Web Tokens) |
| ะะพะฝัะตะนะฝะตัะธะทะฐัะธั | Docker, Docker Compose |
| ะกะฑะพัะบะฐ | Gradle 8.x (Kotlin DSL) |

## ๐ ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
course-recommendation-platform/
โโโ build.gradle.kts              # ะะพัะฝะตะฒะพะน Gradle ัะฐะนะป
โโโ settings.gradle.kts           # ะะฐัััะพะนะบะธ ะผะพะดัะปะตะน
โโโ docker-compose.yml            # Docker Compose ะบะพะฝัะธะณััะฐัะธั
โโโ init-db.sql                   # ะะฝะธัะธะฐะปะธะทะฐัะธั ะะ
โโโ common/                       # ะะฑัะธะน ะผะพะดัะปั (DTO)
โ   โโโ build.gradle.kts
โ   โโโ src/main/java/
โ       โโโ com/courseplatform/common/dto/
โโโ user-service/                 # ะกะตัะฒะธั ะฟะพะปัะทะพะฒะฐัะตะปะตะน
โ   โโโ build.gradle.kts
โ   โโโ Dockerfile
โ   โโโ src/
โโโ course-service/               # ะกะตัะฒะธั ะบัััะพะฒ
โ   โโโ build.gradle.kts
โ   โโโ Dockerfile
โ   โโโ src/
โโโ rating-service/               # ะกะตัะฒะธั ะพัะตะฝะพะบ
โ   โโโ build.gradle.kts
โ   โโโ Dockerfile
โ   โโโ src/
โโโ recommendation-service/       # ะกะตัะฒะธั ัะตะบะพะผะตะฝะดะฐัะธะน (Ktor)
โ   โโโ build.gradle.kts
โ   โโโ Dockerfile
โ   โโโ src/
โโโ scripts/                      # ะฃัะธะปะธัั
    โโโ start-all.sh
    โโโ stop-all.sh
    โโโ test-api.sh
    โโโ run-tests.sh
```

## ๐ ะขัะตะฑะพะฒะฐะฝะธั

- Docker ะธ Docker Compose
- Java 17+ (ะดะปั ะปะพะบะฐะปัะฝะพะน ัะฐะทัะฐะฑะพัะบะธ)
- Gradle 8.x (wrapper ะฒะบะปัััะฝ)

## ๐ ะะฐะฟััะบ ะฟัะพะตะบัะฐ

### ะงะตัะตะท Docker Compose (ัะตะบะพะผะตะฝะดัะตััั)

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose up -d

# ะะปะธ ะธัะฟะพะปัะทัั ัะบัะธะฟั
./scripts/start-all.sh

# ะัะพัะผะพัั ะปะพะณะพะฒ
docker-compose logs -f

# ะััะฐะฝะพะฒะบะฐ
docker-compose down
```

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ ะดะปั ัะฐะทัะฐะฑะพัะบะธ

1. ะะฐะฟััะบ ะธะฝััะฐััััะบัััั:
```bash
docker-compose up -d postgres zookeeper kafka
```

2. ะะฐะฟััะบ ัะตัะฒะธัะพะฒ (ะฒ ะพัะดะตะปัะฝัั ัะตัะผะธะฝะฐะปะฐั):
```bash
# User Service
cd user-service
../gradlew bootRun

# Course Service
cd course-service
../gradlew bootRun

# Rating Service
cd rating-service
../gradlew bootRun

# Recommendation Service
cd recommendation-service
../gradlew run
```

## ๐ API ะดะพะบัะผะตะฝัะฐัะธั

### UserService (ะฟะพัั 8081)

| ะะตัะพะด | Endpoint | ะะฟะธัะฐะฝะธะต |
|-------|----------|----------|
| POST | `/api/auth/register` | ะะตะณะธัััะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั |
| POST | `/api/auth/login` | ะะฒัะพัะธะทะฐัะธั (ะฟะพะปััะตะฝะธะต JWT) |
| GET | `/api/users/{id}` | ะะพะปััะตะฝะธะต ะฟะพะปัะทะพะฒะฐัะตะปั ะฟะพ ID |
| GET | `/api/users` | ะกะฟะธัะพะบ ะฒัะตั ะฟะพะปัะทะพะฒะฐัะตะปะตะน (ADMIN) |
| POST | `/api/users/validate` | ะะฐะปะธะดะฐัะธั JWT ัะพะบะตะฝะฐ |

#### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะะตะณะธัััะฐัะธั
curl -X POST http://localhost:8081/api/auth/register \
  -H "Content-Type: application/json" \
  -d '{"username":"user1","email":"user1@example.com","password":"pass123"}'

# ะะฒัะพัะธะทะฐัะธั
curl -X POST http://localhost:8081/api/auth/login \
  -H "Content-Type: application/json" \
  -d '{"username":"user1","password":"pass123"}'
```

### CourseService (ะฟะพัั 8082)

| ะะตัะพะด | Endpoint | ะะฟะธัะฐะฝะธะต |
|-------|----------|----------|
| GET | `/api/courses` | ะกะฟะธัะพะบ ะฒัะตั ะบัััะพะฒ |
| GET | `/api/courses/{id}` | ะััั ะฟะพ ID |
| POST | `/api/courses` | ะกะพะทะดะฐะฝะธะต ะบัััะฐ |
| PUT | `/api/courses/{id}` | ะะฑะฝะพะฒะปะตะฝะธะต ะบัััะฐ |
| DELETE | `/api/courses/{id}` | ะฃะดะฐะปะตะฝะธะต ะบัััะฐ |
| GET | `/api/courses/category/{category}` | ะัััั ะฟะพ ะบะฐัะตะณะพัะธะธ |
| GET | `/api/courses/search?keyword=` | ะะพะธัะบ ะบัััะพะฒ |
| GET | `/api/courses/top-rated` | ะขะพะฟ ะบัััะพะฒ ะฟะพ ัะตะนัะธะฝะณั |

#### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะกะพะทะดะฐะฝะธะต ะบัััะฐ
curl -X POST http://localhost:8082/api/courses \
  -H "Content-Type: application/json" \
  -d '{"title":"Java Basics","description":"Intro to Java","category":"Programming","instructor":"John"}'

# ะะพะธัะบ
curl "http://localhost:8082/api/courses/search?keyword=Java"
```

### RatingService (ะฟะพัั 8083)

| ะะตัะพะด | Endpoint | ะะฟะธัะฐะฝะธะต |
|-------|----------|----------|
| POST | `/api/ratings` | ะกะพะทะดะฐะฝะธะต ะพัะตะฝะบะธ |
| PUT | `/api/ratings` | ะะฑะฝะพะฒะปะตะฝะธะต ะพัะตะฝะบะธ |
| GET | `/api/ratings/user/{userId}` | ะัะตะฝะบะธ ะฟะพะปัะทะพะฒะฐัะตะปั |
| GET | `/api/ratings/course/{courseId}` | ะัะตะฝะบะธ ะบัััะฐ |
| DELETE | `/api/ratings/user/{userId}/course/{courseId}` | ะฃะดะฐะปะตะฝะธะต ะพัะตะฝะบะธ |

#### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะัะตะฝะบะฐ ะบัััะฐ
curl -X POST http://localhost:8083/api/ratings \
  -H "Content-Type: application/json" \
  -d '{"userId":1,"courseId":1,"rating":5,"comment":"Great course!"}'
```

### RecommendationService (ะฟะพัั 8084)

| ะะตัะพะด | Endpoint | ะะฟะธัะฐะฝะธะต |
|-------|----------|----------|
| GET | `/api/recommendations/{userId}` | ะะตะบะพะผะตะฝะดะฐัะธะธ ะดะปั ะฟะพะปัะทะพะฒะฐัะตะปั |
| POST | `/api/recommendations/{userId}/recalculate` | ะะตัะตัััั ัะตะบะพะผะตะฝะดะฐัะธะน |
| GET | `/api/recommendations/{userId}/preferences` | ะัะตะดะฟะพััะตะฝะธั ะฟะพะปัะทะพะฒะฐัะตะปั |
| POST | `/api/recommendations/sync-courses` | ะกะธะฝััะพะฝะธะทะฐัะธั ะบัััะพะฒ |
| GET | `/health` | Health check |

#### ะัะธะผะตัั ะทะฐะฟัะพัะพะฒ

```bash
# ะะพะปััะตะฝะธะต ัะตะบะพะผะตะฝะดะฐัะธะน
curl http://localhost:8084/api/recommendations/1

# ะะตัะตัััั ัะตะบะพะผะตะฝะดะฐัะธะน
curl -X POST http://localhost:8084/api/recommendations/1/recalculate
```

## ๐ ะะทะฐะธะผะพะดะตะนััะฒะธะต ัะตัะฒะธัะพะฒ

### ะกัะตะฝะฐัะธะน ัะฐะฑะพัั

1. **ะะตะณะธัััะฐัะธั**: ะะพะปัะทะพะฒะฐัะตะปั ัะตะณะธัััะธััะตััั ะฒ UserService โ ะฟะพะปััะฐะตั JWT ัะพะบะตะฝ
2. **ะัะตะฝะบะฐ ะบัััะฐ**: ะะพะปัะทะพะฒะฐัะตะปั ะพัะฟัะฐะฒะปัะตั ะพัะตะฝะบั ะฒ RatingService
3. **Kafka ัะพะฑััะธะต**: RatingService ะฟัะฑะปะธะบัะตั ัะพะฑััะธะต ะฒ ัะพะฟะธะบ `ratings`
4. **ะะฑัะฐะฑะพัะบะฐ**: RecommendationService ะฟะพะปััะฐะตั ัะพะฑััะธะต ะธ ะฟะตัะตััะธััะฒะฐะตั ัะตะบะพะผะตะฝะดะฐัะธะธ
5. **ะะพะปััะตะฝะธะต ัะตะบะพะผะตะฝะดะฐัะธะน**: ะะพะปัะทะพะฒะฐัะตะปั ะทะฐะฟัะฐัะธะฒะฐะตั ะฟะตััะพะฝะฐะปัะฝัะต ัะตะบะพะผะตะฝะดะฐัะธะธ

### Kafka ัะพะฟะธะบ

- **ะะฐะทะฒะฐะฝะธะต**: `ratings`
- **ะคะพัะผะฐั ัะพะพะฑัะตะฝะธั**: JSON
```json
{
  "id": 1,
  "userId": 100,
  "courseId": 200,
  "rating": 5,
  "comment": "Great course!",
  "timestamp": "2024-01-01T10:00:00"
}
```

## ๐งช ะขะตััะธัะพะฒะฐะฝะธะต

### ะะฐะฟััะบ unit-ัะตััะพะฒ

```bash
# ะัะต ัะตััั
./gradlew test

# ะะพะฝะบัะตัะฝัะน ะผะพะดัะปั
./gradlew :user-service:test
./gradlew :course-service:test
./gradlew :rating-service:test
./gradlew :recommendation-service:test
```

### ะะฝัะตะณัะฐัะธะพะฝะฝะพะต ัะตััะธัะพะฒะฐะฝะธะต API

```bash
# ะะฐะฟััะบ ะฒัะตั ัะตัะฒะธัะพะฒ
docker-compose up -d

# ะัะฟะพะปะฝะตะฝะธะต ัะตััะพะฒัั ะทะฐะฟัะพัะพะฒ
./scripts/test-api.sh
```

## ๐ง ะะพะปะตะทะฝัะต ะบะพะผะฐะฝะดั

```bash
# ะัะพัะผะพัั ะปะพะณะพะฒ ะบะพะฝะบัะตัะฝะพะณะพ ัะตัะฒะธัะฐ
docker-compose logs -f user-service

# ะะตัะตะทะฐะฟััะบ ัะตัะฒะธัะฐ
docker-compose restart rating-service

# ะะตัะตัะฑะพัะบะฐ ะธ ะทะฐะฟััะบ
docker-compose up -d --build

# ะัะธััะบะฐ
docker-compose down -v

# Kafka UI
# ะัะบัััั http://localhost:8090
```

## ๐ ะะพะฝะธัะพัะธะฝะณ

- **Kafka UI**: http://localhost:8090 - ะฟัะพัะผะพัั ัะพะฟะธะบะพะฒ ะธ ัะพะพะฑัะตะฝะธะน
- **Health endpoints**:
  - http://localhost:8081/actuator/health
  - http://localhost:8082/actuator/health
  - http://localhost:8083/actuator/health
  - http://localhost:8084/health

## ๐ ะะธัะตะฝะทะธั

ะฃัะตะฑะฝัะน ะฟัะพะตะบั ะดะปั ะฟัะฐะบัะธะบะธ ัััะดะตะฝัะพะฒ.

---

*ะกะพะทะดะฐะฝะพ ะดะปั ััะตะฑะฝะพะน ะฟัะฐะบัะธะบะธ ะฟะพ ะบัััั Java*
